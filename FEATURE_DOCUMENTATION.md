# ğŸ“‹ NAMOAI Chat - æ©Ÿèƒ½ä¸€è¦§è¡¨åŠã³ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ§‹æˆ

> **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ**: Namos Chat v1  
> **æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯**: Next.js 15, TypeScript, Prisma, PostgreSQL, NextAuth, Google Gemini AI  
> **ä½œæˆæ—¥**: 2025-10-27

---

## ğŸ“‘ ç›®æ¬¡
1. [èªè¨¼åŠã³ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†](#1-èªè¨¼åŠã³ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†)
2. [ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ç®¡ç†](#2-ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ç®¡ç†)
3. [ãƒãƒ£ãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ ](#3-ãƒãƒ£ãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ )
4. [ã‚½ãƒ¼ã‚·ãƒ£ãƒ«æ©Ÿèƒ½](#4-ã‚½ãƒ¼ã‚·ãƒ£ãƒ«æ©Ÿèƒ½)
5. [ãƒšãƒ«ã‚½ãƒŠã‚·ã‚¹ãƒ†ãƒ ](#5-ãƒšãƒ«ã‚½ãƒŠã‚·ã‚¹ãƒ†ãƒ )
6. [ãƒã‚¤ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ ](#6-ãƒã‚¤ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ )
7. [æ¤œç´¢åŠã³ãƒ©ãƒ³ã‚­ãƒ³ã‚°](#7-æ¤œç´¢åŠã³ãƒ©ãƒ³ã‚­ãƒ³ã‚°)
8. [ç®¡ç†è€…æ©Ÿèƒ½](#8-ç®¡ç†è€…æ©Ÿèƒ½)
9. [ãŠçŸ¥ã‚‰ã›åŠã³ã‚¬ã‚¤ãƒ‰](#9-ãŠçŸ¥ã‚‰ã›åŠã³ã‚¬ã‚¤ãƒ‰)
10. [å…±é€šãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«](#10-å…±é€šãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«)

---

## 1. èªè¨¼åŠã³ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†

### ğŸ“Œ ä¸»è¦æ©Ÿèƒ½
- ä¼šå“¡ç™»éŒ²/ãƒ­ã‚°ã‚¤ãƒ³ (ãƒ¡ãƒ¼ãƒ«ã€OAuth)
- ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç®¡ç† (ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ã€ç”»åƒã€è‡ªå·±ç´¹ä»‹)
- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´
- ã‚»ãƒ¼ãƒ•ãƒ†ã‚£ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼è¨­å®š
- ä¼šå“¡é€€ä¼š

### ğŸ“‚ é–¢é€£ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

#### Frontend (Pages)
- `src/app/register/page.tsx` - ä¼šå“¡ç™»éŒ²ãƒšãƒ¼ã‚¸
- `src/app/login/page.tsx` - ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸
- `src/app/MyPage/page.tsx` - ãƒã‚¤ãƒšãƒ¼ã‚¸
- `src/app/profile-edit/page.tsx` - ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç·¨é›†ãƒšãƒ¼ã‚¸
- `src/app/change-password/page.tsx` - ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´ãƒšãƒ¼ã‚¸
- `src/app/profile/[userId]/page.tsx` - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«é–²è¦§

#### Backend (API Routes)
- `src/app/api/auth/[...nextauth]/route.ts` - NextAuthèªè¨¼ãƒãƒ³ãƒ‰ãƒ©ãƒ¼
- `src/app/api/register/route.ts` - ä¼šå“¡ç™»éŒ²API
- `src/app/api/users/profile/route.ts` - ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«é–²è¦§/ç·¨é›†API
- `src/app/api/users/change-password/route.ts` - ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´API
- `src/app/api/users/safety-filter/route.ts` - ã‚»ãƒ¼ãƒ•ãƒ†ã‚£ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼è¨­å®šAPI
- `src/app/api/profile/[userId]/route.ts` - ç‰¹å®šãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«API

#### ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
- `src/lib/nextauth.ts` - NextAuthè¨­å®š
- `src/lib/prisma.ts` - Prismaã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ

#### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
- `users` ãƒ†ãƒ¼ãƒ–ãƒ« - ãƒ¦ãƒ¼ã‚¶ãƒ¼åŸºæœ¬æƒ…å ±
- `Account` ãƒ†ãƒ¼ãƒ–ãƒ« - OAuth ã‚¢ã‚«ã‚¦ãƒ³ãƒˆé€£æº
- `Session` ãƒ†ãƒ¼ãƒ–ãƒ« - ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
- `VerificationToken` ãƒ†ãƒ¼ãƒ–ãƒ« - ãƒ¡ãƒ¼ãƒ«èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³

---

## 2. ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ç®¡ç†

### ğŸ“Œ ä¸»è¦æ©Ÿèƒ½
- AIã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ä½œæˆ/ç·¨é›†/å‰Šé™¤
- ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ (è¤‡æ•°ç”»åƒ)
- ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼å…¬é–‹/éå…¬é–‹è¨­å®š
- ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼è©³ç´°æƒ…å ± (è¨­å®šã€ã‚·ã‚¹ãƒ†ãƒ ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã€æœ€åˆã®å°è©ãªã©)
- ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚«ãƒ†ã‚´ãƒªãƒ¼åŠã³ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°
- ãƒ­ãƒ¼ãƒ–ãƒƒã‚¯ (èƒŒæ™¯çŸ¥è­˜) ç®¡ç†
- ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãŠæ°—ã«å…¥ã‚Š
- ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚³ãƒ¡ãƒ³ãƒˆåŠã³è©•ä¾¡
- ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚¤ãƒ³ãƒãƒ¼ãƒˆ (Import)

### ğŸ“‚ é–¢é€£ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

#### Frontend (Pages)
- `src/app/charlist/page.tsx` - ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ä¸€è¦§ãƒšãƒ¼ã‚¸
- `src/app/characters/create/page.tsx` - ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ä½œæˆãƒšãƒ¼ã‚¸
- `src/app/characters/edit/[id]/page.tsx` - ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ç·¨é›†ãƒšãƒ¼ã‚¸
- `src/app/characters/[characterId]/page.tsx` - ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼è©³ç´°ãƒšãƒ¼ã‚¸
- `src/app/character-management/page.tsx` - è‡ªåˆ†ã®ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ç®¡ç†ãƒšãƒ¼ã‚¸

#### Backend (API Routes)
- `src/app/api/characters/route.ts` - ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ä½œæˆ/ä¸€è¦§å–å¾—API
- `src/app/api/characters/[id]/route.ts` - ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼è©³ç´°/ç·¨é›†/å‰Šé™¤API
- `src/app/api/characters/[id]/favorite/route.ts` - ãŠæ°—ã«å…¥ã‚Šè¿½åŠ /å‰Šé™¤API
- `src/app/api/characters/[id]/comments/route.ts` - ã‚³ãƒ¡ãƒ³ãƒˆé–²è¦§/ä½œæˆAPI
- `src/app/api/characters/[id]/comments/[commentId]/route.ts` - ã‚³ãƒ¡ãƒ³ãƒˆç·¨é›†/å‰Šé™¤API
- `src/app/api/characters/[id]/import/route.ts` - ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚¤ãƒ³ãƒãƒ¼ãƒˆAPI
- `src/app/api/charlist/route.ts` - ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãƒªã‚¹ãƒˆAPI (ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°)

#### Components
- `src/components/CharacterCard.tsx` - ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚«ãƒ¼ãƒ‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- `src/components/CharacterForm.tsx` - ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ä½œæˆ/ç·¨é›†ãƒ•ã‚©ãƒ¼ãƒ 
- `src/components/CharacterRow.tsx` - ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼æ¨ªä¸¦ã³ãƒªã‚¹ãƒˆ
- `src/components/SafeImage.tsx` - ç”»åƒå®‰å…¨è¡¨ç¤ºã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

#### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
- `characters` ãƒ†ãƒ¼ãƒ–ãƒ« - ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼åŸºæœ¬æƒ…å ±
- `character_images` ãƒ†ãƒ¼ãƒ–ãƒ« - ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ç”»åƒ
- `lorebooks` ãƒ†ãƒ¼ãƒ–ãƒ« - ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãƒ­ãƒ¼ãƒ–ãƒƒã‚¯ (ãƒ™ã‚¯ãƒˆãƒ«åŸ‹ã‚è¾¼ã¿)
- `favorites` ãƒ†ãƒ¼ãƒ–ãƒ« - ãŠæ°—ã«å…¥ã‚Š
- `comments` ãƒ†ãƒ¼ãƒ–ãƒ« - ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚³ãƒ¡ãƒ³ãƒˆ
- `embeddings` ãƒ†ãƒ¼ãƒ–ãƒ« - ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼èª¬æ˜ã®åŸ‹ã‚è¾¼ã¿

---

## 3. ãƒãƒ£ãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ 

### ğŸ“Œ ä¸»è¦æ©Ÿèƒ½
- AIã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã¨ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒãƒ£ãƒƒãƒˆ
- ãƒãƒ£ãƒƒãƒˆå±¥æ­´ç®¡ç†
- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å†ç”Ÿæˆ (ãƒ–ãƒ©ãƒ³ãƒæ©Ÿèƒ½)
- ç”»åƒé€ä¿¡åŠã³è¡¨ç¤º
- ãƒãƒ£ãƒƒãƒˆãƒãƒ¼ãƒˆ (ãƒ¡ãƒ¢) æ©Ÿèƒ½
- ãƒãƒ£ãƒƒãƒˆè¨­å®š (ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º)
- ãƒãƒ£ãƒƒãƒˆå‰Šé™¤

### ğŸ“‚ é–¢é€£ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

#### Frontend (Pages)
- `src/app/chat/[characterId]/page.tsx` - ãƒãƒ£ãƒƒãƒˆãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸
- `src/app/chatlist/page.tsx` - ãƒãƒ£ãƒƒãƒˆä¸€è¦§ãƒšãƒ¼ã‚¸
- `src/app/chatlist/ChatListPage.css` - ãƒãƒ£ãƒƒãƒˆä¸€è¦§ã‚¹ã‚¿ã‚¤ãƒ«

#### Backend (API Routes)
- `src/app/api/chat/new/route.ts` - æ–°è¦ãƒãƒ£ãƒƒãƒˆä½œæˆAPI
- `src/app/api/chat/[chatId]/route.ts` - ãƒãƒ£ãƒƒãƒˆé–²è¦§/å‰Šé™¤API
- `src/app/api/chat/[chatId]/note/route.ts` - ãƒãƒ£ãƒƒãƒˆãƒãƒ¼ãƒˆç·¨é›†API
- `src/app/api/chat/messages/route.ts` - ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é–²è¦§API
- `src/app/api/chats/route.ts` - ãƒãƒ£ãƒƒãƒˆä¸€è¦§å–å¾—API
- `src/app/api/chats/find-or-create/route.ts` - ãƒãƒ£ãƒƒãƒˆæ¤œç´¢ã¾ãŸã¯ä½œæˆAPI
- `src/app/api/chatlist/route.ts` - ãƒãƒ£ãƒƒãƒˆãƒªã‚¹ãƒˆAPI

#### Components
- `src/components/chat/ChatHeader.tsx` - ãƒãƒ£ãƒƒãƒˆãƒ˜ãƒƒãƒ€ãƒ¼
- `src/components/chat/ChatFooter.tsx` - ãƒãƒ£ãƒƒãƒˆå…¥åŠ›ã‚¨ãƒªã‚¢
- `src/components/chat/ChatMessageList.tsx` - ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä¸€è¦§è¡¨ç¤º
- `src/components/chat/ConfirmationModal.tsx` - ç¢ºèªãƒ¢ãƒ¼ãƒ€ãƒ«
- `src/components/chat/ImageLightbox.tsx` - ç”»åƒæ‹¡å¤§è¡¨ç¤º
- `src/components/ChatImageRenderer.tsx` - ãƒãƒ£ãƒƒãƒˆç”»åƒãƒ¬ãƒ³ãƒ€ãƒ©ãƒ¼
- `src/components/ChatMessageParser.tsx` - ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ‘ãƒ¼ã‚¹ (ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ãªã©)
- `src/components/ChatSettings.tsx` - ãƒãƒ£ãƒƒãƒˆè¨­å®šãƒ¢ãƒ¼ãƒ€ãƒ«

#### Types
- `src/types/chat.ts` - ãƒãƒ£ãƒƒãƒˆé–¢é€£å‹å®šç¾©

#### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
- `chat` ãƒ†ãƒ¼ãƒ–ãƒ« - ãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ æƒ…å ±
- `chat_message` ãƒ†ãƒ¼ãƒ–ãƒ« - ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ (ãƒ–ãƒ©ãƒ³ãƒãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†å«ã‚€)
- `interactions` ãƒ†ãƒ¼ãƒ–ãƒ« - ãƒ¦ãƒ¼ã‚¶ãƒ¼-ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ç›¸äº’ä½œç”¨ãƒ­ã‚°

---

## 4. ã‚½ãƒ¼ã‚·ãƒ£ãƒ«æ©Ÿèƒ½

### ğŸ“Œ ä¸»è¦æ©Ÿèƒ½
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚©ãƒ­ãƒ¼/ã‚¢ãƒ³ãƒ•ã‚©ãƒ­ãƒ¼
- ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼/ãƒ•ã‚©ãƒ­ã‚¤ãƒ³ã‚°ä¸€è¦§é–²è¦§
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ–ãƒ­ãƒƒã‚¯/ãƒ–ãƒ­ãƒƒã‚¯è§£é™¤
- ãƒ–ãƒ­ãƒƒã‚¯ãƒªã‚¹ãƒˆç®¡ç†
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«é–²è¦§

### ğŸ“‚ é–¢é€£ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

#### Frontend (Pages)
- `src/app/profile/[userId]/page.tsx` - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒšãƒ¼ã‚¸

#### Backend (API Routes)
- `src/app/api/profile/[userId]/follow/route.ts` - ãƒ•ã‚©ãƒ­ãƒ¼/ã‚¢ãƒ³ãƒ•ã‚©ãƒ­ãƒ¼API
- `src/app/api/profile/[userId]/followers/route.ts` - ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼ä¸€è¦§API
- `src/app/api/profile/[userId]/following/route.ts` - ãƒ•ã‚©ãƒ­ã‚¤ãƒ³ã‚°ä¸€è¦§API
- `src/app/api/profile/[userId]/block/route.ts` - ãƒ–ãƒ­ãƒƒã‚¯/ãƒ–ãƒ­ãƒƒã‚¯è§£é™¤API
- `src/app/api/profile/[userId]/blocked-users/route.ts` - ãƒ–ãƒ­ãƒƒã‚¯ãƒªã‚¹ãƒˆAPI

#### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
- `follows` ãƒ†ãƒ¼ãƒ–ãƒ« - ãƒ•ã‚©ãƒ­ãƒ¼é–¢ä¿‚
- `Block` ãƒ†ãƒ¼ãƒ–ãƒ« - ãƒ–ãƒ­ãƒƒã‚¯é–¢ä¿‚

---

## 5. ãƒšãƒ«ã‚½ãƒŠã‚·ã‚¹ãƒ†ãƒ 

### ğŸ“Œ ä¸»è¦æ©Ÿèƒ½
- ãƒšãƒ«ã‚½ãƒŠä½œæˆ/ç·¨é›†/å‰Šé™¤
- ãƒšãƒ«ã‚½ãƒŠä¸€è¦§é–²è¦§
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒšãƒ«ã‚½ãƒŠè¨­å®š
- ãƒãƒ£ãƒƒãƒˆæ™‚ã®ãƒšãƒ«ã‚½ãƒŠé©ç”¨

### ğŸ“‚ é–¢é€£ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

#### Frontend (Pages)
- `src/app/persona/form/[[...personaId]]/page.tsx` - ãƒšãƒ«ã‚½ãƒŠä½œæˆ/ç·¨é›†ãƒšãƒ¼ã‚¸
- `src/app/persona/list/page.tsx` - ãƒšãƒ«ã‚½ãƒŠä¸€è¦§ãƒšãƒ¼ã‚¸

#### Backend (API Routes)
- `src/app/api/persona/route.ts` - ãƒšãƒ«ã‚½ãƒŠä½œæˆ/ä¸€è¦§å–å¾—API
- `src/app/api/persona/[personaId]/route.ts` - ãƒšãƒ«ã‚½ãƒŠé–²è¦§/ç·¨é›†/å‰Šé™¤API

#### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
- `personas` ãƒ†ãƒ¼ãƒ–ãƒ« - ãƒšãƒ«ã‚½ãƒŠæƒ…å ±
- `users.defaultPersonaId` - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒšãƒ«ã‚½ãƒŠè¨­å®š

---

## 6. ãƒã‚¤ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ 

### ğŸ“Œ ä¸»è¦æ©Ÿèƒ½
- ç„¡æ–™ãƒã‚¤ãƒ³ãƒˆ/æœ‰æ–™ãƒã‚¤ãƒ³ãƒˆç®¡ç†
- å‡ºå¸­ãƒã‚§ãƒƒã‚¯å ±é…¬
- ãƒã‚¤ãƒ³ãƒˆå±¥æ­´é–²è¦§
- ãƒã‚¤ãƒ³ãƒˆå·®ã—å¼•ã (ãƒãƒ£ãƒƒãƒˆä½¿ç”¨æ–™)

### ğŸ“‚ é–¢é€£ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

#### Frontend (Pages)
- `src/app/points/page.tsx` - ãƒã‚¤ãƒ³ãƒˆç®¡ç†ãƒšãƒ¼ã‚¸

#### Backend (API Routes)
- `src/app/api/points/route.ts` - ãƒã‚¤ãƒ³ãƒˆé–²è¦§/æ›´æ–°API
- `src/app/api/users/points/route.ts` - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒã‚¤ãƒ³ãƒˆAPI

#### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
- `points` ãƒ†ãƒ¼ãƒ–ãƒ« - ãƒã‚¤ãƒ³ãƒˆæƒ…å ± (ç„¡æ–™/æœ‰æ–™åˆ†é›¢)

---

## 7. æ¤œç´¢åŠã³ãƒ©ãƒ³ã‚­ãƒ³ã‚°

### ğŸ“Œ ä¸»è¦æ©Ÿèƒ½
- ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼æ¤œç´¢ (åå‰ã€èª¬æ˜ã€ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°)
- äººæ°—ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãƒ©ãƒ³ã‚­ãƒ³ã‚°
- æ–°è¦ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãƒ©ãƒ³ã‚­ãƒ³ã‚°
- ã‚«ãƒ†ã‚´ãƒªãƒ¼åˆ¥ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°

### ğŸ“‚ é–¢é€£ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

#### Frontend (Pages)
- `src/app/search/page.tsx` - æ¤œç´¢ãƒšãƒ¼ã‚¸
- `src/app/ranking/page.tsx` - ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒšãƒ¼ã‚¸
- `src/app/page.tsx` - ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ (ãƒˆãƒ¬ãƒ³ãƒ‰ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼è¡¨ç¤º)

#### Backend (API Routes)
- `src/app/api/search/route.ts` - æ¤œç´¢API
- `src/app/api/ranking/route.ts` - ãƒ©ãƒ³ã‚­ãƒ³ã‚°API
- `src/app/api/main-page/route.ts` - ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ãƒ‡ãƒ¼ã‚¿API

---

## 8. ç®¡ç†è€…æ©Ÿèƒ½

### ğŸ“Œ ä¸»è¦æ©Ÿèƒ½
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç† (é–²è¦§ã€æ¨©é™ç·¨é›†)
- ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ç®¡ç† (æ‰¿èªã€å‰Šé™¤)
- ã‚¬ã‚¤ãƒ‰ç®¡ç† (ä½œæˆã€ç·¨é›†ã€å‰Šé™¤)
- ãŠçŸ¥ã‚‰ã›ç®¡ç†
- ç®¡ç†è€…ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰

### ğŸ“‚ é–¢é€£ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

#### Frontend (Pages)
- `src/app/admin/page.tsx` - ç®¡ç†è€…ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
- `src/app/admin/users/page.tsx` - ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ãƒšãƒ¼ã‚¸
- `src/app/admin/characters/page.tsx` - ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ç®¡ç†ãƒšãƒ¼ã‚¸
- `src/app/admin/guides/page.tsx` - ã‚¬ã‚¤ãƒ‰ç®¡ç†ãƒšãƒ¼ã‚¸

#### Backend (API Routes)
- `src/app/api/admin/users/route.ts` - ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†API
- `src/app/api/admin/characters/route.ts` - ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ç®¡ç†API
- `src/app/api/admin/guides/route.ts` - ã‚¬ã‚¤ãƒ‰ç®¡ç†API

#### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
- `users.role` - ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¨©é™ (USER, MODERATOR, CHAR_MANAGER, SUPER_ADMIN)

---

## 9. ãŠçŸ¥ã‚‰ã›åŠã³ã‚¬ã‚¤ãƒ‰

### ğŸ“Œ ä¸»è¦æ©Ÿèƒ½
- ãŠçŸ¥ã‚‰ã›é–²è¦§
- ãŠçŸ¥ã‚‰ã›ä½œæˆ/ç·¨é›†/å‰Šé™¤ (ç®¡ç†è€…)
- ã‚¬ã‚¤ãƒ‰é–²è¦§ (ã‚«ãƒ†ã‚´ãƒªãƒ¼åˆ¥)
- ã‚¬ã‚¤ãƒ‰ä½œæˆ/ç·¨é›†/å‰Šé™¤ (ç®¡ç†è€…)

### ğŸ“‚ é–¢é€£ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

#### Frontend (Pages)
- `src/app/notice/page.tsx` - ãŠçŸ¥ã‚‰ã›ä¸€è¦§ãƒšãƒ¼ã‚¸
- `src/app/notice/[noticeId]/page.tsx` - ãŠçŸ¥ã‚‰ã›è©³ç´°ãƒšãƒ¼ã‚¸
- `src/app/notice/admin/page.tsx` - ãŠçŸ¥ã‚‰ã›ç®¡ç†ãƒšãƒ¼ã‚¸
- `src/app/notice/admin/[noticeId]/page.tsx` - ãŠçŸ¥ã‚‰ã›ç·¨é›†ãƒšãƒ¼ã‚¸
- `src/app/guide/page.tsx` - ã‚¬ã‚¤ãƒ‰ãƒšãƒ¼ã‚¸

#### Backend (API Routes)
- `src/app/api/notice/route.ts` - ãŠçŸ¥ã‚‰ã›ä¸€è¦§/ä½œæˆAPI
- `src/app/api/notice/[noticeId]/route.ts` - ãŠçŸ¥ã‚‰ã›é–²è¦§/ç·¨é›†/å‰Šé™¤API
- `src/app/api/guides/route.ts` - ã‚¬ã‚¤ãƒ‰API

#### Components
- `src/components/NoticeDetailClient.tsx` - ãŠçŸ¥ã‚‰ã›è©³ç´°ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
- `src/components/NoticeForm.tsx` - ãŠçŸ¥ã‚‰ã›ä½œæˆãƒ•ã‚©ãƒ¼ãƒ 

#### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
- `notices` ãƒ†ãƒ¼ãƒ–ãƒ« - ãŠçŸ¥ã‚‰ã›
- `guides` ãƒ†ãƒ¼ãƒ–ãƒ« - ã‚¬ã‚¤ãƒ‰ (ãƒ¡ã‚¤ãƒ³/ã‚µãƒ–ã‚«ãƒ†ã‚´ãƒªãƒ¼)

---

## 10. å…±é€šãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

### ğŸ“‚ ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆåŠã³ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
- `src/app/layout.tsx` - ãƒ«ãƒ¼ãƒˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
- `src/app/globals.css` - ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚¿ã‚¤ãƒ«
- `src/components/AppShell.tsx` - ã‚¢ãƒ—ãƒªã‚·ã‚§ãƒ« (ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ç®¡ç†)
- `src/components/BottomNav.tsx` - ä¸‹éƒ¨ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
- `src/components/Providers.tsx` - Providerãƒ©ãƒƒãƒ‘ãƒ¼ (NextAuthãªã©)

### ğŸ“‚ UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- `src/components/ui/button.tsx` - ãƒœã‚¿ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- `src/components/ui/card.tsx` - ã‚«ãƒ¼ãƒ‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- `src/components/ui/checkbox.tsx` - ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- `src/components/ui/dialog.tsx` - ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- `src/components/ui/input.tsx` - å…¥åŠ›ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- `src/components/ui/textarea.tsx` - ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

### ğŸ“‚ ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
- `src/lib/db.ts` - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶š (PostgreSQL)
- `src/lib/prisma.ts` - Prismaã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
- `src/lib/redis.ts` - Redisã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ (Upstash)
- `src/lib/secrets.ts` - ç§˜å¯†æƒ…å ±ç®¡ç†
- `src/lib/secrets-loader.ts` - GCP Secret Manageré€£æº
- `src/lib/utils.ts` - å…±é€šãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°

### ğŸ“‚ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£åŠã³èªè¨¼
- `src/utils/ensureGcpCreds.ts` - GCPèªè¨¼æƒ…å ±ç¢ºèª

### ğŸ“‚ ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
- `scripts/gsm-fetch.mjs` - GCP Secret Managerã‹ã‚‰ç§˜å¯†æƒ…å ±å–å¾—

### ğŸ“‚ è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
- `next.config.ts` - Next.jsè¨­å®š
- `tailwind.config.js` - Tailwind CSSè¨­å®š (v4)
- `tsconfig.json` - TypeScriptè¨­å®š
- `prisma/schema.prisma` - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ
- `components.json` - shadcn/uiã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­å®š
- `netlify.toml` - Netlifyãƒ‡ãƒ—ãƒ­ã‚¤è¨­å®š

---

## ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒè¦ç´„

### ã‚³ã‚¢ãƒ†ãƒ¼ãƒ–ãƒ«
| ãƒ†ãƒ¼ãƒ–ãƒ«å | ç”¨é€” | ä¸»è¦ãªé–¢ä¿‚ |
|---------|------|---------|
| `users` | ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ± | â†’ characters, chat, personas, points |
| `characters` | AIã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ | â†’ character_images, lorebooks, favorites |
| `chat` | ãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ  | â†’ chat_message, users, characters |
| `chat_message` | ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ | â†’ chat (ãƒ–ãƒ©ãƒ³ãƒãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†) |
| `personas` | ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒšãƒ«ã‚½ãƒŠ | â†’ users |
| `points` | ãƒã‚¤ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ  | â†’ users |
| `favorites` | ãŠæ°—ã«å…¥ã‚Š | users â†” characters |
| `follows` | ãƒ•ã‚©ãƒ­ãƒ¼é–¢ä¿‚ | users â†” users |
| `Block` | ãƒ–ãƒ­ãƒƒã‚¯é–¢ä¿‚ | users â†” users |
| `comments` | ã‚³ãƒ¡ãƒ³ãƒˆ | â†’ characters, users |
| `lorebooks` | ãƒ­ãƒ¼ãƒ–ãƒƒã‚¯ | â†’ characters (ãƒ™ã‚¯ãƒˆãƒ«åŸ‹ã‚è¾¼ã¿) |
| `notices` | ãŠçŸ¥ã‚‰ã› | ç‹¬ç«‹ãƒ†ãƒ¼ãƒ–ãƒ« |
| `guides` | ã‚¬ã‚¤ãƒ‰ | ç‹¬ç«‹ãƒ†ãƒ¼ãƒ–ãƒ« |

---

## ğŸ”§ ä¸»è¦æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯è©³ç´°

### Frontend
- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: Next.js 15 (App Router)
- **UI**: React 19, Tailwind CSS v4, shadcn/ui
- **çŠ¶æ…‹ç®¡ç†**: React Hooks
- **èªè¨¼**: NextAuth v4

### Backend
- **ãƒ©ãƒ³ã‚¿ã‚¤ãƒ **: Node.js 20.19.4
- **API**: Next.js API Routes
- **ORM**: Prisma 6.11.1
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: PostgreSQL (with pgvector)
- **ã‚­ãƒ£ãƒƒã‚·ãƒ¥**: Redis (Upstash)

### AIçµ±åˆ
- **AIãƒ¢ãƒ‡ãƒ«**: Google Gemini (Vertex AI)
- **ãƒ©ã‚¤ãƒ–ãƒ©ãƒª**: `@google-cloud/vertexai`, `@google/generative-ai`
- **ãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢**: pgvector (ãƒ­ãƒ¼ãƒ–ãƒƒã‚¯ã€åŸ‹ã‚è¾¼ã¿)

### ã‚¤ãƒ³ãƒ•ãƒ©
- **ã‚¯ãƒ©ã‚¦ãƒ‰**: Google Cloud Platform
- **ç§˜å¯†ç®¡ç†**: GCP Secret Manager
- **ãƒ‡ãƒ—ãƒ­ã‚¤**: Netlify
- **ãƒ•ã‚¡ã‚¤ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸**: AWS S3 ã¾ãŸã¯ Supabase Storage

---

## ğŸ“ˆ é–‹ç™ºãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ— (äºˆæƒ³)

### âœ… å®Œäº†ã—ãŸæ©Ÿèƒ½
- âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ã‚·ã‚¹ãƒ†ãƒ 
- âœ… ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼CRUD
- âœ… AIãƒãƒ£ãƒƒãƒˆåŸºæœ¬æ©Ÿèƒ½
- âœ… ãƒã‚¤ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ 
- âœ… ã‚½ãƒ¼ã‚·ãƒ£ãƒ«æ©Ÿèƒ½ (ãƒ•ã‚©ãƒ­ãƒ¼/ãƒ–ãƒ­ãƒƒã‚¯)
- âœ… ç®¡ç†è€…ãƒšãƒ¼ã‚¸
- âœ… ãƒšãƒ«ã‚½ãƒŠã‚·ã‚¹ãƒ†ãƒ 
- âœ… ãƒ­ãƒ¼ãƒ–ãƒƒã‚¯æ©Ÿèƒ½

### ğŸš§ æ”¹å–„å¯èƒ½ãªé ˜åŸŸ
- ğŸ”„ ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ 
- ğŸ”„ ãƒãƒ£ãƒƒãƒˆç”»åƒç”Ÿæˆ (AI)
- ğŸ”„ éŸ³å£°ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½
- ğŸ”„ æ±ºæ¸ˆã‚·ã‚¹ãƒ†ãƒ  (æœ‰æ–™ãƒã‚¤ãƒ³ãƒˆ)
- ğŸ”„ ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãƒãƒ¼ã‚±ãƒƒãƒˆãƒ—ãƒ¬ã‚¤ã‚¹
- ğŸ”„ å¤šè¨€èªã‚µãƒãƒ¼ãƒˆ

---

## ğŸ“ é€£çµ¡å…ˆåŠã³ã‚µãƒãƒ¼ãƒˆ

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé–¢é€£ã®ãŠå•ã„åˆã‚ã›ã¯é–‹ç™ºãƒãƒ¼ãƒ ã¾ã§ã”é€£çµ¡ãã ã•ã„ã€‚

**ä½œæˆæ—¥**: 2025-10-27  
**ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0

# 🏗️ 인프라 비용 비교 및 릴리스 체크리스트

> **프로젝트**: NAMOS Chat v1  
> **작성일**: 2025-01-27  
> **목적**: 릴리스 필수 항목 및 플랫폼별 비용 비교  
> **💴 환율**: 1 USD = 150 JPY (2025년 1월 기준)

---

## 📋 목차

1. [릴리스 필수 항목](#1-릴리스-필수-항목)
2. [현재 사용 중인 스택](#2-현재-사용-중인-스택)
3. [플랫폼 비교 (Netlify+Supabase vs AWS)](#3-플랫폼-비교)
4. [월별 예상 비용 (상세)](#4-월별-예상-비용-상세)
5. [최종 추천](#5-최종-추천)

---

## 1. 릴리스 필수 항목

### 1.1 도메인 (Domain)

**필수 항목:**
- [ ] 도메인 이름 확정
- [ ] 도메인 등록 업체 선택
- [ ] 도메인 구매 및 등록
- [ ] DNS 설정

**추천 업체:**
| 업체 | 가격 (JPY) | 특징 |
|------|-----------|------|
| Namecheap | ¥1,332/년 | 저렴, WHOIS 무료 |
| Google Domains | ¥1,800/년 | 구글 통합, 간편 |
| AWS Route 53 | ¥1,800/년 | AWS 통합, 높은 신뢰성 |
| Cloudflare | ¥1,286/년 | 원가, CDN 무료 |

**추천:** Namecheap 또는 Cloudflare (가격 + 기능)

**예상 비용:** 
- **연간**: ¥1,350-1,800
- **월간**: ¥113-150

---

### 1.2 호스팅 (Hosting)

**필수 항목:**
- [ ] 호스팅 플랫폼 선택
- [ ] 배포 파이프라인 설정
- [ ] SSL 인증서 설정
- [ ] CDN 설정
- [ ] 환경 변수 설정

**옵션:** Netlify vs AWS

---

### 1.3 데이터베이스 (Database)

**필수 항목:**
- [ ] PostgreSQL 데이터베이스
- [ ] pgvector 확장 (벡터 검색)
- [ ] 백업 설정
- [ ] 접근 권한 설정
- [ ] SSL 연결 설정

**옵션:** Supabase vs AWS RDS

---

### 1.4 스토리지 (Storage)

**필수 항목:**
- [ ] 이미지 업로드 스토리지
- [ ] 퍼블릭 URL 생성
- [ ] CDN 연동
- [ ] 보안 정책 (RLS)

**옵션:** Supabase Storage vs AWS S3 vs **Cloudflare R2** (🔥 추천)

**예상 사용량:**
- 캐릭터 이미지: 평균 2-5MB/이미지
- 사용자 1,000명 기준: 10,000 이미지 = 약 20-50GB
- **월간 전송량**: 약 100-200GB (이미지 조회)

---

### 1.5 AI 서비스

**필수 항목:**
- [ ] LLM API (챗봇)
- [ ] Embedding API (벡터 검색)
- [ ] API 키 발급
- [ ] 사용량 제한 설정
- [ ] 비용 알림 설정

**현재 사용:**
- Google Vertex AI (Gemini 2.5 Flash/Pro)
- OpenAI (text-embedding-3-small)

---

### 1.6 Secret 관리

**필수 항목:**
- [ ] API 키 암호화 저장
- [ ] 환경 변수 관리
- [ ] 접근 권한 관리

**옵션:** 
- Google Secret Manager (현재 사용)
- AWS Secrets Manager
- HashiCorp Vault

---

### 1.7 모니터링 및 로깅

**필수 항목:**
- [ ] 에러 트래킹 (Sentry 등)
- [ ] 성능 모니터링
- [ ] 로그 수집
- [ ] 알림 설정

---

### 1.8 법적 문서

**필수 항목:**
- [ ] 개인정보 처리방침
- [ ] 이용약관
- [ ] 환불 정책
- [ ] 연령 확인 시스템 (성인 콘텐츠)
- [ ] 특정상거래법 표기 (일본)

---

### 1.9 결제 시스템

**필수 항목:**
- [ ] 결제 게이트웨이 선택
- [ ] 결제 API 통합
- [ ] 웹훅 처리
- [ ] 환불 처리 로직

**추천:** CCBill + CoinGate (성인 콘텐츠 허용)

---

## 2. 현재 사용 중인 스택

### 2.1 아키텍처 개요

```
[사용자]
    ↓
[Cloudflare CDN] (선택사항)
    ↓
[Netlify] (호스팅 + Serverless Functions)
    ↓
├─ [Supabase]
│   └─ PostgreSQL (데이터베이스 + pgvector)
│
├─ [Cloudflare R2] 🔥
│   └─ Storage (이미지 스토리지 - 송신료 무료!)
│
├─ [Google Cloud]
│   ├─ Vertex AI (Gemini 2.5 Flash/Pro)
│   └─ Secret Manager
│
└─ [OpenAI]
    └─ Embeddings API (text-embedding-3-small)
```

### 2.2 현재 사용 서비스

| 서비스 | 용도 | 플랜 |
|--------|------|------|
| **Netlify** | 호스팅, Serverless Functions | Pro (¥2,850/월) |
| **Supabase** | PostgreSQL | Pro (¥3,750/월) |
| **Cloudflare R2** | 이미지 스토리지 | 사용량 기반 (추천) |
| **Google Cloud** | Vertex AI, Secret Manager | 사용량 기반 |
| **OpenAI** | Embeddings | 사용량 기반 |

---

## 3. 플랫폼 비교

### 3.1 호스팅 비교

#### Netlify vs AWS (Amplify / CloudFront + Lambda)

| 항목 | Netlify Pro | AWS |
|------|-------------|-----|
| **기본 요금** | ¥2,850/월 | 사용량 기반 |
| **배포** | Git 푸시로 자동 | 수동 설정 필요 |
| **Serverless Functions** | 125,000 req/월 포함 | Lambda: ¥30/1M req |
| **대역폭** | 100GB/월 포함 | CloudFront: ¥12.75/GB |
| **빌드 시간** | 300분/월 포함 | CodeBuild: ¥0.75/분 |
| **SSL 인증서** | 무료 자동 | 무료 (ACM) |
| **커스텀 도메인** | 무제한 | 무제한 |
| **DDoS 방어** | 기본 제공 | 추가 설정 필요 |
| **설정 난이도** | ⭐ 쉬움 | ⭐⭐⭐⭐ 어려움 |

**Netlify 장점:**
- ✅ 설정 및 배포 간편 (Git 연동)
- ✅ 예측 가능한 비용
- ✅ 자동 SSL, CDN 포함
- ✅ 빠른 개발 속도
- ✅ 서버리스 함수 통합

**Netlify 단점:** ⚠️ **실제 비용 폭탄 가능성 높음**
- ❌ **125,000 req/월 초과 시 추가 비용 (¥3,750/125k)**
  - 100명 × 100채팅/일 = 300,000 req/월 → **+¥7,500/월**
  - 1,000명 × 50채팅/일 = 1,500,000 req/월 → **+¥41,250/월** 💣
- ❌ **빌드 시간 초과 시 추가 비용 (¥1,050/500분)**
  - 300분/월 포함
  - 매일 배포 시: 약 150분/월 (안전)
  - 하루 3회 이상 배포 시: 초과 가능
- ❌ 대역폭 초과 시 비용 증가 (¥8,250/TB)
- ❌ 백엔드 로직 제한 (30초 타임아웃)
- ❌ **예측 불가능한 비용 증가** (사용자 증가 시 급격히 증가)

**AWS 장점:**
- ✅ 높은 확장성
- ✅ 다양한 서비스 통합
- ✅ 세밀한 제어 가능
- ✅ 대규모 트래픽 대응

**AWS 단점:**
- ❌ 복잡한 설정
- ❌ 비용 예측 어려움
- ❌ 학습 곡선 가파름
- ❌ 관리 시간 많이 소요

**⚠️ 실제 비용 계산 (정확한 시나리오):**

**시나리오: 100명이 하루에 100개씩 채팅**
```
채팅 수: 100명 × 100개/일 × 30일 = 300,000 채팅/월
API 요청: 300,000 req/월 (채팅 1개 = API 1회)

Netlify Pro 포함: 125,000 req/월
초과 요청: 300,000 - 125,000 = 175,000 req
추가 비용: 175,000 ÷ 125,000 = 1.4 → 2개 단위
         = ¥3,750 × 2 = ¥7,500/월

빌드 시간: 
- 매일 배포 시: 5분/빌드 × 30일 = 150분/월 (포함 내)
- 하루 2회 배포 시: 10분/일 × 30일 = 300분/월 (포함 내)
- 하루 3회 이상 배포 시: 초과 발생 가능

대역폭:
- 정적 파일: 약 50GB/월 (포함 내)
- API 응답: 약 30GB/월 (포함 내)

총 Netlify 비용:
기본 요금: ¥2,850/월
추가 요청: ¥7,500/월
빌드 시간: ¥0 (포함 내)
대역폭: ¥0 (포함 내)
─────────────────────
총합: ¥10,350/월
```

**시나리오: 1,000명이 하루에 50개씩 채팅**
```
채팅 수: 1,000명 × 50개/일 × 30일 = 1,500,000 채팅/월
API 요청: 1,500,000 req/월

Netlify Pro 포함: 125,000 req/월
초과 요청: 1,500,000 - 125,000 = 1,375,000 req
추가 비용: 1,375,000 ÷ 125,000 = 11개 단위
         = ¥3,750 × 11 = ¥41,250/월

총 Netlify 비용:
기본 요금: ¥2,850/월
추가 요청: ¥41,250/월
─────────────────────
총합: ¥44,100/월 💣
```

**AWS (Amplify + Lambda + CloudFront):**
```
Lambda: 500k req × ¥30/1M = ¥15
CloudFront: 100GB × ¥12.75 = ¥1,275
S3 호스팅: ¥150/월
Route 53: ¥75/월
총합: ¥1,515/월 (관리 비용 제외)
```

---

### 3.2 데이터베이스 비교

#### Supabase vs AWS RDS

| 항목 | Supabase Pro | AWS RDS |
|------|--------------|---------|
| **기본 요금** | ¥3,750/월 | 사용량 기반 |
| **데이터베이스** | PostgreSQL 15 | PostgreSQL 선택 가능 |
| **스토리지** | 8GB 포함 | 별도 과금 |
| **대역폭** | 50GB/월 포함 | 별도 과금 |
| **자동 백업** | 7일 보관 | 추가 설정 |
| **pgvector 지원** | ✅ 기본 제공 | ✅ 설치 필요 |
| **연결 풀링** | ✅ 포함 | ✅ RDS Proxy (¥2.25/시간) |
| **SSL 연결** | ✅ 기본 | ✅ 기본 |
| **관리형 서비스** | ✅ 완전 관리형 | ⚠️ 일부 관리 필요 |
| **설정 난이도** | ⭐ 쉬움 | ⭐⭐⭐ 보통 |

**Supabase 장점:**
- ✅ pgvector 기본 지원 (벡터 검색)
- ✅ 실시간 기능 (Realtime)
- ✅ Row Level Security (RLS) 기본 제공
- ✅ 간편한 API 자동 생성
- ✅ 예측 가능한 비용

**Supabase 단점:**
- ❌ 8GB 스토리지 제한 (초과 시 추가 비용)
- ❌ 동시 연결 제한
- ❌ 커스터마이징 제한

**AWS RDS 장점:**
- ✅ 높은 확장성
- ✅ 세밀한 제어
- ✅ 다양한 인스턴스 타입
- ✅ 백업 및 복제 옵션

**AWS RDS 단점:**
- ❌ 복잡한 설정
- ❌ 비용 예측 어려움
- ❌ 관리 오버헤드
- ❌ pgvector 수동 설치

**예상 비용 (1,000명 사용자 기준):**

**Supabase Pro:**
```
기본 요금: ¥3,750/월
스토리지 초과 (5GB): ¥0/월 (8GB 내)
총합: ¥3,750/월
```

**AWS RDS (db.t3.small):**
```
인스턴스: ¥3,750/월
스토리지: 20GB × ¥17.25 = ¥345/월
백업 스토리지: 20GB × ¥14.25 = ¥285/월
데이터 전송: ¥0/월 (같은 리전)
총합: ¥4,380/월
```

**AWS RDS (db.t3.micro - 최소):**
```
인스턴스: ¥1,905/월
스토리지: 20GB × ¥17.25 = ¥345/월
백업 스토리지: 20GB × ¥14.25 = ¥285/월
총합: ¥2,535/월
```

---

### 3.3 스토리지 비교

#### Supabase Storage vs AWS S3 vs Cloudflare R2

| 항목 | Supabase Pro | AWS S3 | **Cloudflare R2** 🔥 |
|------|--------------|--------|---------------------|
| **기본 요금** | ¥3,750/월 (DB 포함) | 사용량 기반 | 사용량 기반 |
| **스토리지** | 100GB 포함 | ¥3.45/GB | **¥2.25/GB** |
| **송신료 (Egress)** | 50GB/월 포함 | **¥12.75/GB** | **¥0 (무료!)** 🔥 |
| **CDN** | ✅ 포함 | CloudFront 별도 | ✅ 자동 연동 |
| **변환 기능** | ✅ 이미지 리사이징 | Lambda 필요 | ✅ Images API |
| **RLS (보안)** | ✅ 기본 제공 | IAM 정책 필요 | Workers 필요 |
| **퍼블릭 URL** | ✅ 자동 생성 | 설정 필요 | ✅ 자동 생성 |
| **설정 난이도** | ⭐ 쉬움 | ⭐⭐⭐ 보통 | ⭐⭐ 쉬움 |
| **S3 호환** | ❌ | ✅ | ✅ |

**Supabase Storage 장점:**
- ✅ 간편한 설정
- ✅ 이미지 변환 기본 제공
- ✅ RLS로 세밀한 권한 관리
- ✅ 데이터베이스와 통합
- ✅ 100GB 스토리지 + 50GB 대역폭 포함

**Supabase Storage 단점:**
- ❌ 100GB 제한 (초과 시 추가 비용)
- ❌ 대역폭 50GB/월 제한 (초과 시 비용 증가)
- ❌ 이미지 전송량이 많으면 비용 폭탄 💣

**AWS S3 장점:**
- ✅ 무제한 확장
- ✅ 다양한 스토리지 클래스
- ✅ 99.999999999% 내구성
- ✅ S3 호환 API

**AWS S3 단점:**
- ❌ 복잡한 IAM 설정
- ❌ CDN 별도 설정 (CloudFront)
- ❌ 이미지 변환 Lambda 필요
- ❌ **송신료 매우 비쌈** (¥12.75/GB) 💣

**Cloudflare R2 장점:** 🔥
- ✅ **송신료 완전 무료!** (이미지 조회 비용 없음)
- ✅ 낮은 스토리지 비용 (¥2.25/GB)
- ✅ CDN 자동 연동
- ✅ Images API (자동 최적화)
- ✅ S3 호환 API (마이그레이션 쉬움)
- ✅ 설정 간편

**Cloudflare R2 단점:**
- ❌ RLS 직접 구현 필요 (Workers 사용)
- ❌ Supabase만큼 통합 기능 없음

**예상 비용 (50GB 스토리지, 100GB 월간 전송 기준):**

**Supabase Storage:**
```
기본 요금: ¥0 (Pro 플랜 포함)
스토리지 50GB: 포함 (100GB 내)
대역폭 50GB/월: 포함
대역폭 초과 50GB: ¥7,500/월 (추가 비용)
총합: ¥7,500/월 (대역폭 초과 시)
```

**AWS S3 + CloudFront:**
```
S3 스토리지: 50GB × ¥3.45 = ¥173/월
S3 PUT 요청: 10,000 × ¥0.75/1k = ¥8/월
CloudFront 전송: 100GB × ¥12.75 = ¥1,275/월 💣
CloudFront 요청: 1M × ¥1.50/10k = ¥150/월
총합: ¥1,606/월
```

**Cloudflare R2:** 🔥 **최고 추천!**
```
R2 스토리지: 50GB × ¥2.25 = ¥113/월
R2 PUT 요청: 10,000 × ¥0.15/1k = ¥2/월
송신료 (Egress): 100GB × ¥0 = ¥0/월 🎉
Images API: ¥0/월 (기본 포함)
총합: ¥115/월
```

**비용 비교:**
- Supabase: ¥7,500/월 (대역폭 초과 시)
- AWS: ¥1,606/월
- **Cloudflare R2: ¥115/월** (65배 저렴!) 🔥

---

## 4. 월별 예상 비용 (상세)

### 4.1 Netlify + Supabase + GCP (현재 스택)

#### 📊 고정 비용

| 서비스 | 플랜 | 월 비용 (JPY) | 포함 내용 |
|--------|------|--------------|----------|
| **도메인** | - | ¥150 | - |
| **Netlify** | Pro | ¥2,850 | 125k req, 100GB 대역폭, 300분 빌드 |
| **Supabase** | Pro | ¥3,750 | 8GB DB (스토리지는 R2 사용) |
| **Cloudflare R2** | 사용량 | ¥115 | 50GB 스토리지, 송신료 무료 🔥 |
| **소계** | - | **¥6,865** | - |

#### 📊 변동 비용 (1,000명 사용자 기준)

**⚠️ 실제 시나리오: 1,000명이 하루에 50개씩 채팅**
```
채팅 수: 1,000명 × 50개/일 × 30일 = 1,500,000 채팅/월
API 요청: 1,500,000 req/월

Netlify Pro 포함: 125,000 req/월
초과 요청: 1,500,000 - 125,000 = 1,375,000 req
추가 비용: 1,375,000 ÷ 125,000 = 11개 단위
         = ¥3,750 × 11 = ¥41,250/월 💣
```

| 서비스 | 사용량 | 단가 | 월 비용 (JPY) |
|--------|--------|------|--------------|
| **Netlify 추가 요청** | 1,375k req | ¥3,750/125k | **¥41,250** 💣 |
| **Gemini 2.5 Flash (Input)** | 11,173.5M tokens | ¥11.25/1M | ¥125,700 |
| **Gemini 2.5 Flash (Output)** | 585M tokens | ¥45/1M | ¥26,400 |
| **Gemini 2.5 Pro (요약)** | Input 2,340M | ¥187.50/1M | ¥438,750 |
| **Gemini 2.5 Pro (요약)** | Output 468M | ¥750/1M | ¥351,000 |
| **OpenAI Embeddings** | 1,287M tokens | ¥3/1M | ¥3,900 |
| **Secret Manager** | 10k req | ¥4.50/10k | ¥5 |
| **소계** | - | - | **¥957,000** |

#### 💰 총 예상 비용 (1,000명 사용자)

```
고정 비용:          ¥6,865
  ├─ 도메인: ¥150
  ├─ Netlify: ¥2,850
  ├─ Supabase: ¥3,750
  └─ Cloudflare R2: ¥115

변동 비용:          ¥987,000
  ├─ AI (Gemini): ¥941,850
  ├─ Embeddings: ¥3,900
  ├─ Netlify 추가: ¥41,250 💣 (1,500k req 기준)
  └─ 기타: ¥5

──────────────────────────────────────
총 월 비용:          ¥993,865
```

**⚠️ 중요: Netlify 추가 비용이 예상보다 3.7배 높음!**

#### 📉 비용 절감 방안

1. **Gemini 요약 빈도 조정**
   - 현재: 5개 메시지마다 요약
   - 변경: 10개 메시지마다 요약
   - 절감: 약 ¥390,000/월 - 50% 감소

2. **Flash 모델 주로 사용**
   - Pro는 복잡한 요약만
   - 절감: 약 ¥450,000/월

3. **최적화 후 예상 비용**
   - 원래: ¥963,865/월
   - 절감 후: ¥450,000/월

---

### 4.2 AWS 풀스택 (대안)

#### 📊 고정 비용

| 서비스 | 구성 | 월 비용 (JPY) |
|--------|------|--------------|
| **도메인** | Route 53 | ¥150 |
| **호스팅** | CloudFront + S3 | ¥750 |
| **데이터베이스** | RDS db.t3.micro | ¥2,550 |
| **소계** | - | **¥3,450** |

#### 📊 변동 비용 (1,000명 사용자)

| 서비스 | 사용량 | 단가 | 월 비용 (JPY) |
|--------|--------|------|--------------|
| **Lambda 실행** | 500k req | ¥30/1M | ¥15 |
| **Lambda 실행 시간** | 500k × 5초 | ¥0.0025/GB-초 | ¥6,250 |
| **S3 스토리지** | 50GB | ¥3.45/GB | ¥173 |
| **CloudFront 전송** | 100GB | ¥12.75/GB | ¥1,275 |
| **RDS 스토리지** | 20GB | ¥17.25/GB | ¥345 |
| **AI 비용** | (동일) | - | ¥945,750 |
| **소계** | - | - | **¥953,850** |

#### 💰 총 예상 비용 (1,000명 사용자)

```
고정 비용:          ¥3,450
변동 비용:          ¥953,850
──────────────────────────────────────────
총 월 비용:          ¥957,300
```

**차이:** 약 ¥6,565/월 - Netlify+Supabase+R2가 약간 더 비쌈 (하지만 스토리지 비용 절감)

---

### 4.3 소규모 운영 (100명 사용자)

**⚠️ 실제 시나리오: 100명이 하루에 100개씩 채팅**

#### Netlify + Supabase + Cloudflare R2

| 항목 | 월 비용 (JPY) | 비고 |
|------|--------------|------|
| 고정 비용 | ¥6,865 | 도메인+Netlify+Supabase+R2 |
| **Netlify 추가 요청** | **¥7,500** | **300k req - 125k = 175k 초과** 💣 |
| AI 비용 (Flash 위주) | ¥22,500 | 100명 기준 |
| Embeddings | ¥450 | |
| **총합** | **¥37,315** | **기본 비용의 5.4배!** |

#### AWS (비교)

| 항목 | 월 비용 (JPY) | 비고 |
|------|--------------|------|
| 고정 비용 | ¥3,450 | 도메인+호스팅+DB |
| Lambda (300k req) | ¥9 | 300k × ¥30/1M |
| Lambda 실행 시간 | ¥6,250 | 300k × 5초 |
| CloudFront | ¥1,275 | 100GB 전송 |
| AI 비용 (동일) | ¥22,500 | |
| Embeddings | ¥450 | |
| **총합** | **¥33,934** | |

**차이:** Netlify가 **+¥3,381/월 더 비쌈** (약 10% 더 비쌈)

---

### 4.4 대규모 운영 (10,000명 사용자)

#### Netlify + Supabase

| 항목 | 월 비용 (USD) | 월 비용 (JPY) |
|------|--------------|--------------|
| 고정 비용 | $45 | ¥6,750 |
| Netlify 추가 (4M req) | $800 | ¥120,000 |
| Supabase 추가 DB | $100 | ¥15,000 |
| AI 비용 (Flash 위주) | $20,000 | ¥3,000,000 |
| Embeddings | $260 | ¥39,000 |
| **총합** | **$21,205** | **¥3,180,750** |

#### AWS

| 항목 | 월 비용 (USD) | 월 비용 (JPY) |
|------|--------------|--------------|
| 고정 비용 | $23 | ¥3,450 |
| Lambda + CloudFront | $500 | ¥75,000 |
| RDS (db.t3.large) | $120 | ¥18,000 |
| AI 비용 (동일) | $20,000 | ¥3,000,000 |
| Embeddings | $260 | ¥39,000 |
| **총합** | **$20,903** | **¥3,135,450** |

**차이:** 약 $302/월 (¥45,300/월) - AWS가 저렴

---

## 5. 최종 추천

### 5.1 추천: Netlify + Supabase (현재 스택 유지)

#### ✅ 이유

1. **빠른 개발 및 배포**
   - Git 푸시로 자동 배포
   - 설정 시간 최소화
   - 개발 생산성 극대화

2. **예측 가능한 비용**
   - 고정 요금제
   - 비용 관리 용이
   - 예산 계획 수립 쉬움

3. **완전 관리형 서비스**
   - 서버 관리 불필요
   - 자동 스케일링
   - 보안 패치 자동

4. **통합된 생태계**
   - Supabase: DB + Storage + Auth
   - 단일 플랫폼에서 관리
   - 개발자 친화적 API

5. **소규모 팀에 적합**
   - 운영 인력 최소화
   - 인프라 관리 부담 없음

#### ⚠️ 단, 대규모 (10,000명+) 고려 시

AWS로 마이그레이션 고려:
- Lambda + API Gateway
- RDS (또는 Aurora)
- S3 + CloudFront
- ElastiCache (Redis)

---

### 5.2 단계별 비용 최적화 전략

#### Phase 1: 출시 직후 (0-100명)
```
목표: 빠른 출시, 최소 비용
플랫폼: Netlify + Supabase
예상 비용: $50-100/월 (¥7,500-15,000/월)
```

#### Phase 2: 성장기 (100-1,000명)
```
목표: 안정적 운영, 비용 관리
플랫폼: Netlify + Supabase (유지)
최적화: AI 요약 빈도 조정
예상 비용: $200-700/월 (¥30,000-105,000/월)
```

#### Phase 3: 확장기 (1,000-10,000명)
```
목표: 확장성, 비용 효율
고려: AWS 마이그레이션 검토
최적화: 자체 AI 모델 또는 캐싱
예상 비용: $3,000-8,000/월 (¥450,000-1,200,000/월)
```

#### Phase 4: 대규모 (10,000명+)
```
목표: 대규모 운영
플랫폼: AWS 완전 마이그레이션
추가: 
  - ElastiCache (캐싱)
  - CloudWatch (모니터링)
  - Auto Scaling
예상 비용: $20,000+/월 (¥3,000,000+/월)
```

---

### 5.3 즉시 시작 가능한 릴리스 체크리스트

#### ✅ 1주일 내 완료 가능

- [x] 호스팅: Netlify (이미 사용 중) - ¥2,850/월
- [x] 데이터베이스: Supabase (이미 사용 중) - ¥3,750/월
- [x] 스토리지: Supabase Storage (이미 사용 중) - 포함
- [ ] 도메인 구매 및 연결 - ¥1,350/년
- [ ] 환경 변수 프로덕션 설정
- [ ] 결제 시스템: CoinGate (암호화폐) - 수수료 1%
- [ ] 법적 문서 작성

#### ⏰ 2-4주 내 완료

- [ ] 결제 시스템: CCBill 승인 (신용카드)
- [ ] 연령 확인 시스템
- [ ] 모니터링 설정 (Sentry)
- [ ] 백업 자동화

---

### 5.4 예산별 추천 플랫폼

#### 💰 저예산 (¥15,000/월 미만)
```
플랫폼: Netlify Free + Supabase Free
제한:
  - 사용자 50명 미만
  - 제한된 기능
  - 개발/테스트 용도
```

#### 💰 표준 (¥15,000-75,000/월)
```
플랫폼: Netlify Pro + Supabase Pro
추천: ✅ 현재 스택
사용자: 100-500명
월 비용: ¥31,200-75,000
```

#### 💰 중규모 (¥75,000-750,000/월)
```
플랫폼: Netlify Pro + Supabase Pro
또는: AWS 검토
사용자: 500-5,000명
월 비용: ¥75,000-750,000
```

#### 💰 대규모 (¥750,000+/월)
```
플랫폼: AWS 완전 전환
사용자: 5,000명+
월 비용: ¥750,000+
```

---

## 📊 6. 최종 비용 요약표

### 6.1 사용자 규모별 월 비용

| 사용자 수 | Netlify+Supabase+R2 | AWS | 차이 | 추천 |
|-----------|---------------------|-----|------|------|
| **100명** (100채팅/일) | ¥37,315 | ¥33,934 | +¥3,381 | **AWS** (비용 효율) |
| **500명** (50채팅/일) | ¥150,000 | ¥145,000 | +¥5,000 | **AWS** (비용 효율) |
| **1,000명** (50채팅/일) | ¥993,865 | ¥957,300 | +¥36,565 | **AWS** (비용 효율) 💣 |
| **5,000명** | ¥2,250,000 | ¥2,175,000 | +¥75,000 | **AWS** (비용 효율) |
| **10,000명** | ¥3,180,750 | ¥3,135,450 | +¥45,300 | **AWS** (확장성) |

### 6.2 비용 구성 (1,000명 기준)

```
고정 인프라: ¥6,865 - 전체의 0.7%
  ├─ 도메인: ¥150
  ├─ Netlify: ¥2,850
  ├─ Supabase: ¥3,750
  └─ Cloudflare R2: ¥115 🔥

변동 비용: ¥957,000 - 전체의 99.3%
  ├─ AI (Gemini): ¥941,850 - 변동비의 98%
  ├─ Embeddings: ¥3,900
  ├─ Netlify 추가: ¥11,250
  └─ 기타: ¥5

총 비용: ¥963,865/월
```

**핵심: AI 비용이 전체의 98% (¥941,850/월)**

---

## ⚡ 7. 긴급 비용 절감 방안

AI 비용이 대부분을 차지하므로, AI 최적화가 핵심입니다.

### 7.1 즉시 적용 가능 (50% 절감)

1. **요약 빈도 조정**
   ```
   현재: 5개 메시지마다 요약
   변경: 10개 메시지마다 요약
   절감: $2,600/월 (¥390,000/월)
   ```

2. **Pro 모델 사용 최소화**
   ```
   현재: 20% 요약에 Pro 사용
   변경: 5% 요약에만 Pro 사용
   절감: ¥375,000/월
   ```

3. **시스템 프롬프트 최적화**
   ```
   현재: 2,000 tokens
   변경: 1,500 tokens (압축)
   절감: ¥30,000/월
   ```

### 7.2 중기 대응 (70% 절감)

1. **응답 캐싱**
   - Redis 캐싱 (Upstash)
   - 동일 질문 재사용
   - 절감: ¥150,000/월

2. **사용자 등급제**
   - 무료 사용자: 제한된 AI 호출
   - 유료 사용자: 무제한
   - 절감: 변동

---

## 📝 8. 다음 단계

### 8.1 즉시 실행 (이번 주)

1. [ ] 도메인 구매 (Namecheap 또는 Cloudflare)
2. [ ] Netlify 프로덕션 환경 변수 설정
3. [ ] CoinGate 계정 생성 및 테스트
4. [ ] 개인정보 처리방침 작성
5. [ ] 이용약관 작성

### 8.2 2주 내

1. [ ] CCBill 신청
2. [ ] 연령 확인 시스템 구현
3. [ ] 모니터링 설정 (Sentry)
4. [ ] 백업 자동화

### 8.3 1개월 내

1. [ ] AI 비용 최적화
2. [ ] 사용자 피드백 수집
3. [ ] 성능 모니터링 및 개선
4. [ ] 마케팅 시작

---

## 📞 문의 및 지원

**작성일**: 2025-01-27  
**최종 업데이트**: 2025-01-27  
**문서 버전**: 1.0

---

## 🎯 최종 결론

### ⚠️ **Netlify 비용 경고 - 재검토 필요!**

**실제 문제점:**
1. ❌ **125,000 req/월 제한이 매우 낮음**
   - 100명 × 100채팅/일 = 300,000 req/월 → **+¥7,500/월**
   - 1,000명 × 50채팅/일 = 1,500,000 req/월 → **+¥41,250/월** 💣
2. ❌ **빌드 시간도 비용 발생**
   - 개발 중에도 매번 빌드 비용
   - 300분/월 초과 시 추가 비용
3. ❌ **예측 불가능한 비용 증가**
   - 사용자 증가 시 기하급수적 증가
   - 바이럴 시 즉시 비용 폭탄

**권장사항:**
- **100명 미만**: Netlify Pro (간편함 우선)
- **100-500명**: Netlify Business 플랜 고려 (¥14,850/월 고정)
- **500명 이상**: **AWS 전환 강력 추천** (비용 효율)

**⚠️ 실제 예상 총 비용 (정확한 계산):**
- **100명** (100채팅/일): **¥37,315/월** (기본 비용의 5.4배!)
  - Netlify 추가: ¥7,500/월
  - AI 비용: ¥22,500/월
- **1,000명** (50채팅/일): **¥993,865/월** → 최적화 후 ¥450,000/월
  - Netlify 추가: **¥41,250/월** 💣
  - AI 비용: ¥941,850/월
- **대규모** (10,000명): **AWS 전환 필수** (Netlify 비용 폭탄)

**비용 구조 (1,000명 기준):**
- 인프라 고정비: ¥6,750/월 (0.7%)
  - 도메인: ¥150
  - Netlify: ¥2,850
  - Supabase: ¥3,750
- **스토리지 (Cloudflare R2)**: ¥115/월 (0.01%) 🔥
  - Supabase Storage 대신 사용 시 대역폭 비용 절감
- AI 비용: ¥941,850/월 (98%) ← **여기를 줄여야 함**
- 기타: ¥15,035/월 (1.3%)

**스토리지 최적화:**
- Supabase Storage 사용 시: 대역폭 초과 시 ¥7,500/월 추가
- **Cloudflare R2 사용 시: ¥115/월** (65배 저렴!) 🔥

**⚠️ Netlify 비용 경고:**
- 100명 이상 사용 시 Netlify 추가 비용 급증
- **Netlify Business 플랜 고려** (¥14,850/월 고정, 500k req 포함)
- 또는 **AWS 전환 검토** (장기적 비용 효율)

**자세한 내용:** `NETLIFY_COST_WARNING.md` 참고


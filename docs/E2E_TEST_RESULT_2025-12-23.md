## E2E 테스트 결과 정리 (2025-12-23, chromium, workers=1)

- **총 실행 결과 (재분류 반영)**
  - **총 테스트 케이스**: 87개
  - **Passed**: 21개
  - **Failed**: 66개
    - 일반 실패: 61개
    - Skipped (실패로 분류): 5개
  - **Skipped**: 5개 → **실패로 분류** (조건부 skip으로 인해 미실행/미검증)
  - 로그 앞부분이 잘려 있어서, **성공한 일부 테스트의 개별 시나리오 이름은 현재 로그만으로는 전부 식별 불가**합니다. (Playwright 요약에는 개수만 표시됨)

---

## 1. 성공한 테스트들

- **요약**
  - `npx playwright test --project=chromium --workers=1` 전체 실행 기준으로 **17개의 테스트 케이스가 정상 통과**했습니다.
  - 로그 상단이 truncate 되어 있어, **성공 케이스의 상세 시나리오 ID/이름은 이 아티팩트에서 직접적으로 모두 복원할 수 없습니다.**
  - 필요하면 다음 실행부터는 Playwright에 `--reporter=junit` 등을 추가해 **성공 케이스 목록을 XML/HTML 리포트로 저장**하는 쪽을 추천합니다.

> 참고: 현재 로그 파일(`agent-tools/491ba0c9-3360-4b89-a448-acb541a66a0a.txt`)에는 실패/스킵/전체 목록은 남아 있지만, 성공 케이스의 상세 라인은 잘린 상태입니다.

### 1-1. 재실행 결과 기준으로 “OK” 확인된 주요 시나리오

- **관리자 관점**
  - **admin-banners**
    - 2-6-1: バナー一覧確認 → **OK (재실행에서 정상 통과)**
    - 2-6-2: バナー作成 → **OK**
  - **admin-character-management**
    - 캐릭터 목록 표시, 검색, 상세 확인 관련 시나리오 → **OK**
  - **admin-guides**
    - 2-5-1: ガイド一覧確認 → **OK**
  - **admin-ip-management**
    - 2-10-1: IPブロック → **OK (단일 재실행에서 정상 통과, 이전 실패 케이스에서 이동)**  
    - 2-10-3: IPモニタリング → **OK**
  - **admin-notices**
    - 2-4-1: お知らせ一覧確認 → **OK (재실행에서 /notice 공지 목록/없음 메시지까지 정상 확인)**
  - **admin-user-management**
    - 2-2-4: ユーザー情報編集 → **OK (재실행에서 선택자 수정 후 정상 통과 - 모달이 아니라 페이지 내부 폼 구조)**
    - 2-2-5: ユーザー停止 → **OK (재실행에서 선택자 수정 후 정상 통과 - 확인 버튼이 "停止する"로 표시됨)**

- **사용자 관점 / 인증**
  - **auth**
    - 間違ったパスワードでログインできない → **OK (잘못된 비밀번호로는 로그인 불가 동작 확인됨)**

> 위 시나리오들은 **서버가 떠 있는 상태에서 재실행해도 안정적으로 통과하는 케이스**로, 현재 시점 기준 “정상 동작 확인(OK)”으로 표시.

---

## 2. 기능적 버그로 실패한 케이스들

> **참고**: 원래 기능 버그 후보로 분류되었던 3개 중, **2개(2-2-4: ユーザー情報編集, 2-2-5: ユーザー停止)는 재실행 결과 테스트 코드의 선택자 문제로 확인되어 수정 후 성공으로 재분류**되었습니다. (→ 성공 섹션 1-1 참조)

아래 1개는 **서버 죽음/로그인 페이지 장애보다는 화면/동작 자체가 사양과 어긋난 가능성이 높은 케이스**로 분류했습니다.
재실행 시점에서는 `/login`의 Internal Server Error 때문에 다시 시나리오에 진입하지 못했지만, **근본 원인은 여전히 화면/구현 쪽 버그일 가능성이 높다고 판단**하여 기능 버그로 유지합니다.

**기능 버그 후보는 실패로 분류**되며, 실제 기능/UI 문제가 해결되거나 테스트 코드가 수정되어 통과하면 성공으로 재분류됩니다.

- **(1) 약관 관리 – 2-7-2: 約款編集**
  - **Spec**: `e2e/admin-terms.spec.ts:48:7`
  - **에러**: `TimeoutError: locator.click: Timeout 10000ms exceeded.`
    - 저장 버튼을 찾을 때: `getByRole('button', { name: /保存|更新|Save/i }).first()`
  - **원인 후보**
    - UI에 기대하는 **"保存/更新/Save" 버튼이 실제로 없음**
    - 버튼이 렌더링되지 않았거나, 비활성/가려져 있어 **클릭 가능한 상태가 아님**
    - 버튼의 라벨이 사양/테스트 코드와 달라져서 **locator가 요소를 찾지 못하는 상태**
  - **해석**
    - 약관 편집 후 **"저장/갱신 버튼"의 존재/표시/라벨이 테스트 사양과 어긋난 기능 버그** 후보입니다.

---

## 3. 서버/로그인 실패로 인한 케이스들

아래 케이스들은 공통적으로:

- `http://localhost:3000/login` 접근 시
  - **Internal Server Error 페이지**가 뜨거나,
  - `net::ERR_CONNECTION_REFUSED` / `page.goto Timeout` 이 발생하거나,
  - `로그인に失敗しました。ページ: ログイン失敗` 와 같은 **로그인 실패 에러**가 먼저 발생하여,
- **실제 기능 시나리오(검색, 채팅, 포인트 사용 등)에 도달하기 전에 실패한 케이스**입니다.

이들은 **환경/서버 상태/세션/인증 문제로 인한 실패**로 분류했습니다.  
(아래 목록에서 굵게 표시한 1개(기능 버그 후보)를 제외한 나머지 60개가 모두 서버/로그인 계열 실패입니다.)

- **실패한 61개 테스트 전체 목록** (Skipped 5건 제외)  
  - `e2e/admin-notices.spec.ts:56:7` 管理者観点: お知らせ管理 › 2-4-2: お知らせ作成
  - `e2e/admin-reports.spec.ts:43:7` 管理者観点: 通報管理 › 2-8-1: 通報一覧確認
  - `e2e/admin-reports.spec.ts:65:7` 管理者観点: 通報管理 › 2-8-2: 通報フィルタリング
  - **`e2e/admin-terms.spec.ts:48:7` 管理者観点: 約款管理 › 2-7-2: 約款編集** ← 기능 버그 후보
  - `e2e/admin.spec.ts:34:7` 管理者機能 › 管理画面にアクセスできる
  - `e2e/admin.spec.ts:39:7` 管理者機能 › キャラクター管理ページにアクセスできる
  - `e2e/admin.spec.ts:74:7` 管理者機能 › 一般ユーザーは管理画面にアクセスできない
  - `e2e/auth.spec.ts:29:7` 認証機能 › メールアドレスとパスワードでログインできる
  - `e2e/auth.spec.ts:34:7` 認証機能 › ログアウトできる
  - `e2e/character-search.spec.ts:23:7` キャラクター検索機能 › キャラクター一覧ページが表示される
  - `e2e/character-search.spec.ts:31:7` キャラクター検索機能 › キャラクターを検索できる
  - `e2e/character-search.spec.ts:52:7` キャラクター検索機能 › キャラクター詳細ページに遷移できる
  - `e2e/chat.spec.ts:30:7` チャット機能 › キャラクター詳細ページからチャットを開始できる
  - `e2e/chat.spec.ts:48:7` チャット機能 › メッセージを送信できる
  - `e2e/chat.spec.ts:83:7` チャット機能 › AI応答を受信できる
  - `e2e/chat.spec.ts:112:7` チャット機能 › 1-4-3: チャット履歴確認
  - `e2e/chat.spec.ts:141:7` チャット機能 › 1-4-4: チャットキャンセル
  - `e2e/misc-features.spec.ts:44:7` その他細かい機能 › 3-3-1: チャット後ランキング反映確認
  - `e2e/misc-features.spec.ts:91:7` その他細かい機能 › 3-5-1: セーフティフィルターON時OFFキャラクターブロック
  - `e2e/misc-features.spec.ts:135:7` その他細かい機能 › 3-12-2: チャットノート機能
  - `e2e/points-critical.spec.ts:40:7` P0: ポイント関連クリティカルテスト › P0-1: 新規登録 → 初期ポイント確認 → チャット1往復 → ポイント減少
  - `e2e/points-critical.spec.ts:110:7` P0: ポイント関連クリティカルテスト › P0-2: 画像作成 → 生成成功 → ポイント減少（失敗時は減らない）
  - `e2e/points-critical.spec.ts:160:7` P0: ポイント関連クリティカルテスト › P0-3: ポイント0でチャット不可 → 「ポイント購入が必要です」表示 + 購入導線
  - `e2e/points-critical.spec.ts:204:7` P0: ポイント関連クリティカルテスト › P0-4: ポイント0で画像作成不可 → 同上
  - `e2e/points-critical.spec.ts:233:7` P0: ポイント関連クリティカルテスト › P0-5: 通信断/LLM失敗時 → エラー表示 + ポイント減らない + 再試行できる
  - `e2e/points-critical.spec.ts:292:7` P0: ポイント関連クリティカルテスト › P0-6: ログアウト→再ログインでキャラ/履歴/ポイント保持
  - `e2e/user-auth.spec.ts:33:7` ユーザー観点: 認証・アカウント管理 › 1-1-1: メールアドレス 회원가입
  - `e2e/user-auth.spec.ts:99:7` ユーザー観点: 認証・アカウント管理 › 1-1-3: メールアドレス 로그인
  - `e2e/user-auth.spec.ts:119:7` ユーザー観点: 認証・アカウント管理 › 1-1-5: ログアウト
  - `e2e/user-auth.spec.ts:142:7` ユーザー観点: 認証・アカウント管理 › 1-1-6: パスワード変更
  - `e2e/user-character.spec.ts:38:7` ユーザー観点: キャラクター機能 › 1-2-1: キャラクター検索
  - `e2e/user-character.spec.ts:71:7` ユーザー観点: キャラクター機能 › 1-2-2: キャラクター一覧確認
  - `e2e/user-character.spec.ts:117:7` ユーザー観点: キャラクター機能 › 1-2-3: キャラクター詳細確認
  - `e2e/user-character.spec.ts:158:7` ユーザー観点: キャラクター機能 › 1-3-2: キャラクター作成 (手動入力)
  - `e2e/user-character.spec.ts:203:7` ユーザー観点: キャラクター機能 › 1-3-3: キャラクター編集
  - `e2e/user-character.spec.ts:236:7` ユーザー観点: キャラクター機能 › 1-3-5: キャラクタークローン
  - `e2e/user-inquiries.spec.ts:31:7` ユーザー観点: お問い合わせ・通報機能 › 1-9-1: お問い合わせ作成
  - `e2e/user-inquiries.spec.ts:82:7` ユーザー観点: お問い合わせ・通報機能 › 1-9-2: キャラクター通報
  - `e2e/user-inquiries.spec.ts:128:7` ユーザー観点: お問い合わせ・通報機能 › 1-9-3: 自分のお問い合わせ/通報一覧確認
  - `e2e/user-journey.spec.ts:25:7` ユーザージャーニー › ログインからチャットまでの一連の流れ
  - `e2e/user-notices.spec.ts:31:7` ユーザー観点: お知らせ・ガイド・約款 › 1-11-1: お知らせ一覧確認
  - `e2e/user-notices.spec.ts:45:7` ユーザー観点: お知らせ・ガイド・約款 › 1-11-2: お知らせ詳細確認
  - `e2e/user-notices.spec.ts:72:7` ユーザー観点: お知らせ・ガイド・約款 › 1-11-3: ガイド確認
  - `e2e/user-notices.spec.ts:96:7` ユーザー観点: お知らせ・ガイド・約款 › 1-11-4: 約款確認
  - `e2e/user-notifications.spec.ts:33:7` ユーザー観点: 通知機能 › 1-7-1: 通知一覧確認
  - `e2e/user-notifications.spec.ts:51:7` ユーザー観点: 通知機能 › 1-7-2: 通知既読処理
  - `e2e/user-notifications.spec.ts:84:7` ユーザー観点: 通知機能 › 1-7-4: 未読通知数確認
  - `e2e/user-persona.spec.ts:32:7` ユーザー観点: ペルソナ機能 › 1-10-1: ペルソナ一覧確認
  - `e2e/user-persona.spec.ts:42:7` ユーザー観点: ペルソナ機能 › 1-10-2: ペルソナ作成
  - `e2e/user-persona.spec.ts:83:7` ユーザー観点: ペルソナ機能 › 1-10-3: ペルソナ編集
  - `e2e/user-persona.spec.ts:116:7` ユーザー観点: ペルソナ機能 › 1-10-4: ペルソナ削除
  - `e2e/user-points.spec.ts:32:7` ユーザー観点: ポイント・決済機能 › 1-5-1: ポイント残高確認
  - `e2e/user-points.spec.ts:57:7` ユーザー観点: ポイント・決済機能 › 1-5-3: 出席チェック
  - `e2e/user-points.spec.ts:85:7` ユーザー観点: ポイント・決済機能 › 1-5-4: ポイント使用確認
  - `e2e/user-ranking.spec.ts:30:7` ユーザー観点: ランキング機能 › 1-8-1: リアルタイムランキング確認
  - `e2e/user-ranking.spec.ts:55:7` ユーザー観点: ランキング機能 › 1-8-2: 日次/週次/月次ランキング確認
  - `e2e/user-ranking.spec.ts:85:7` ユーザー観点: ランキング機能 › 1-8-3: ランキングからキャラクターをクリック
  - `e2e/user-social.spec.ts:38:7` ユーザー観点: ソーシャル機能 › 1-6-1: 自分のプロフィール確認
  - `e2e/user-social.spec.ts:66:7` ユーザー観点: ソーシャル機能 › 1-6-3: フォロー/アンフォロー
  - `e2e/user-social.spec.ts:97:7` ユーザー観点: ソーシャル機能 › 1-6-7: いいね機能
  - `e2e/user-social.spec.ts:151:7` ユーザー観点: ソーシャル機能 › 1-6-8: コメント作成

- **Skipped (조건부 skip으로 인해 미실행/미검증) - 실패로 분류: 5건**
  - `e2e/admin-character-management.spec.ts:116:7` 管理者：キャラクター管理 › 2-3-3: キャラクター公開/非公開切替 (조건: 캐릭터가 없으면 skip)
  - `e2e/admin-character-management.spec.ts:143:7` 管理者：キャラクター管理 › 2-3-5: キャラクター削除 (조건: 캐릭터 또는 삭제 버튼이 없으면 skip)
  - `e2e/admin-character-management.spec.ts:171:7` 管理者：キャラクター管理 › 2-3-7: ナモアイフレンズ登録/解除 (조건: 캐릭터가 없으면 skip)
  - `e2e/admin-ip-management.spec.ts:69:7` 管理者観点: IP管理 › 2-10-2: IPブロック解除 (조건: 차단된 IP가 없으면 skip)
  - `e2e/admin-reports.spec.ts:100:7` 管理者観点: 通報管理 › 2-8-4: 通報状態変更 (조건: 신고가 없으면 skip)
  
> 참고: `e2e/admin.spec.ts:70:7`, `e2e/chat.spec.ts:181:7`, `e2e/user-auth.spec.ts:142:7`는 이미 위 실패 목록에 포함되어 있어 중복 제외했습니다.

> 참고: 위 케이스들은 테스트 코드 내부에서 `test.skip(true, ...)` 조건부 skip 로직에 의해 **실제 실행이 되지 않아 검증되지 않은 상태**입니다.  
> 환경/서버/전제조건 미충족으로 인해 미검증된 케이스로, **실패로 분류**합니다.  
> 실제로 skip 된 5개는 로그에서 명시적으로 식별되지 않았지만, 위 목록 중에서 조건이 충족되지 않아 skip 된 것으로 추정됩니다.

---

## 4. 일본어 정리 (機能バグ候補の1ケース)

- **1) 約款管理 – 2-7-2: 約款編集（`e2e/admin-terms.spec.ts:48:7`）**
  - エラー: `TimeoutError: locator.click: Timeout 10000ms exceeded`  
    （`getByRole('button', { name: /保存|更新|Save/i }).first()` をクリックしようとして 10 秒タイムアウト）
  - 原因候補:
    - 画面上に想定している **「保存 / 更新 / Save」ボタン自体が存在しない**
    - ボタンが非表示・無効化・他要素に隠れていて **クリック可能な状態になっていない**
    - ボタンのラベルが仕様・テストコードと変わっており、**ロケーターが要素を見つけられない**
  - 解釈:
    - 約款編集後の **保存ボタンの有無・表示・ラベルが仕様とずれている機能バグ候補**。



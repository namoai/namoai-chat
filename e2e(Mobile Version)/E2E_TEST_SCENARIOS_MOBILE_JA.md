# モバイルE2Eテストシナリオ管理 (日本語)

**最終更新**: 2025-01-02 (テスト実行結果反映)  
**集計基準**: 実際のテストファイル (`e2e(Mobile Version)/*.spec.ts`) のすべてのテストケース  
**最新実行**: 2025-01-02, Android: 65/65 ユーザーテスト実行 (100% 実行, 76.9% 成功率, 10 失敗, 3 スキップ) | iOS: 65/65 ユーザーテスト実行 (100% 実行, 78.5% 成功率, 9 失敗, 3 スキップ)

**注意事項**:
- モバイル版はAndroid (Pixel 5)とiOS (iPhone 12)の2つのデバイスで実行されます
- PC版と機能は同じですが、レイアウトやUI要素の配置が異なる可能性があります
- モバイル環境ではスクロール、タッチイベント、ハンバーガーメニューなどが追加で考慮されます

---

## 📊 総合統計 (最新実行結果)

| カテゴリ | 総数 | OK | NG | 未実装 | スキップ |
|---------|------|----|----|--------|---------|
| **管理者** | 32 | 0 | 0 | 32 | 0 |
| **ユーザー** | 65 | 51 | 9 | 0 | 3 |
| **その他** | 3 | 0 | 0 | 0 | 0 |
| **合計** | **100** | **51** | **9** | **32** | **3** |

### 成功率 (最新実行基準)
- **管理者**: 0% (0/32) - まだ実行されていません
- **ユーザー**: 
  - Android: 78.5% (51/65 実行, 9 失敗, 3 スキップ, 2 未実行)
  - iOS: 78.5% (51/65 実行, 9 失敗, 3 スキップ, 2 未実行)
  - 平均: 78.5% (102/130 実行)
- **その他**: 0% (0/3) - まだ実行されていません
- **全体**: 51.0% (102/200 実行) - Android + iOS, ユーザーテストのみ実行

### 現在失敗中のテスト
**Android (9個)**:
- **P0-1**: 新規登録 → 初期ポイント確認 → チャット1往復 → ポイント減少 (points-critical.spec.ts)
- **P0-2**: 画像作成 → 生成成功 → ポイント減少 (points-critical.spec.ts)
- **P0-3**: ポイント0でチャット不可 → 「ポイント購入が必要です」表示 (points-critical.spec.ts)
- **P0-4**: ポイント0で画像作成不可 (points-critical.spec.ts)
- **1-3-2**: キャラクター作成（手動入力） (user-character.spec.ts)
- **1-6-3**: フォロー/アンフォロー (user-social.spec.ts)
- **1-9-1**: お問い合わせ作成 (user-inquiries.spec.ts)
- **1-9-2**: キャラクター通報 (user-inquiries.spec.ts)
- **3-3-1**: チャット後ランキング反映確認 (misc-features.spec.ts)

**iOS (9個)**:
- **P0-1**: 新規登録 → 初期ポイント確認 → チャット1往復 → ポイント減少 (points-critical.spec.ts)
- **P0-2**: 画像作成 → 生成成功 → ポイント減少 (points-critical.spec.ts)
- **P0-3**: ポイント0でチャット不可 → 「ポイント購入が必要です」表示 (points-critical.spec.ts)
- **P0-4**: ポイント0で画像作成不可 (points-critical.spec.ts)
- **1-3-2**: キャラクター作成（手動入力） (user-character.spec.ts)
- **1-6-3**: フォロー/アンフォロー (user-social.spec.ts)
- **1-9-1**: お問い合わせ作成 (user-inquiries.spec.ts)
- **1-9-2**: キャラクター通報 (user-inquiries.spec.ts)
- **3-3-1**: チャット後ランキング反映確認 (misc-features.spec.ts)

### モバイル環境特有の事項
- ✅ スクロール処理追加済み
- ✅ タッチイベント処理追加済み
- ✅ モバイルメニュー (ハンバーガーメニュー) 処理追加済み
- ⏳ 実際の実行後、結果確認が必要

---

## 📋 管理者シナリオ (32個)

### admin.spec.ts (5個)
| ID | シナリオ | Android | iOS | 状態 |
|----|---------|--------|-----|------|
| - | 管理画面にアクセスできる | ⏳ | ⏳ | 待機 |
| - | キャラクター管理ページにアクセスできる | ⏳ | ⏳ | 待機 |
| - | ユーザー管理ページにアクセスできる | ⏳ | ⏳ | 待機 |
| - | お知らせ管理ページにアクセスできる | ⏳ | ⏳ | 待機 |
| - | 一般ユーザーは管理画面にアクセスできない | ⏳ | ⏳ | 待機 |

### admin-user-management.spec.ts (7個)
| ID | シナリオ | Android | iOS | 状態 |
|----|---------|--------|-----|------|
| - | ユーザー一覧が表示される | ⏳ | ⏳ | 待機 |
| - | ユーザーを検索できる | ⏳ | ⏳ | 待機 |
| - | ユーザー詳細を確認できる | ⏳ | ⏳ | 待機 |
| 2-2-2 | ユーザー検索（メール/ID） | ⏳ | ⏳ | 待機 |
| 2-2-3 | ユーザー権限変更 | ⏳ | ⏳ | 待機 |
| 2-2-4 | ユーザー情報編集 | ⏳ | ⏳ | 待機 |
| 2-2-5 | ユーザー停止 | ⏳ | ⏳ | 待機 |

### admin-character-management.spec.ts (6個)
| ID | シナリオ | Android | iOS | 状態 |
|----|---------|--------|-----|------|
| - | キャラクター一覧が表示される | ⏳ | ⏳ | 待機 |
| - | キャラクターを検索できる | ⏳ | ⏳ | 待機 |
| - | キャラクターの詳細を確認できる | ⏳ | ⏳ | 待機 |
| 2-3-3 | キャラクター公開/非公開切替 | ⏳ | ⏳ | 待機 |
| 2-3-5 | キャラクター削除 | ⏳ | ⏳ | 待機 |
| 2-3-7 | ナモアイフレンズ登録/解除 | ⏳ | ⏳ | 待機 |

### admin-terms.spec.ts (2個)
| ID | シナリオ | Android | iOS | 状態 |
|----|---------|--------|-----|------|
| 2-7-1 | 約款一覧確認 | ⏳ | ⏳ | 待機 |
| 2-7-2 | 約款編集 | ⏳ | ⏳ | 待機 |

### admin-banners.spec.ts (2個)
| ID | シナリオ | Android | iOS | 状態 |
|----|---------|--------|-----|------|
| 2-6-1 | バナー一覧確認 | ⏳ | ⏳ | 待機 |
| 2-6-2 | バナー作成 | ⏳ | ⏳ | 待機 |

### admin-ip-management.spec.ts (3個)
| ID | シナリオ | Android | iOS | 状態 |
|----|---------|--------|-----|------|
| 2-10-1 | IPブロック | ⏳ | ⏳ | 待機 |
| 2-10-2 | IPブロック解除 | ⏳ | ⏳ | 待機 |
| 2-10-3 | IPモニタリング | ⏳ | ⏳ | 待機 |

### admin-reports.spec.ts (3個)
| ID | シナリオ | Android | iOS | 状態 |
|----|---------|--------|-----|------|
| 2-8-1 | 通報一覧確認 | ⏳ | ⏳ | 待機 |
| 2-8-2 | 通報フィルタリング | ⏳ | ⏳ | 待機 |
| 2-8-4 | 通報状態変更 | ⏳ | ⏳ | 待機 |

### admin-notices.spec.ts (2個)
| ID | シナリオ | Android | iOS | 状態 |
|----|---------|--------|-----|------|
| 2-4-1 | お知らせ一覧確認 | ⏳ | ⏳ | 待機 |
| 2-4-2 | お知らせ作成 | ⏳ | ⏳ | 待機 |

### admin-guides.spec.ts (2個)
| ID | シナリオ | Android | iOS | 状態 |
|----|---------|--------|-----|------|
| 2-5-1 | ガイド一覧確認 | ⏳ | ⏳ | 待機 |
| 2-5-2 | ガイド作成 | ⏳ | ⏳ | 待機 |

---

## 📋 ユーザーシナリオ (65個)

### ポイント関連（クリティカル） (6個)
| ID | シナリオ | Android | iOS | 状態 |
|----|---------|--------|-----|------|
| P0-1 | 新規登録 → 初期ポイント確認 → チャット1往復 → ポイント減少 | ❌ | ❌ | NG |
| P0-2 | 画像作成 → 生成成功 → ポイント減少 | ❌ | ❌ | NG |
| P0-3 | ポイント0でチャット不可 → 「ポイント購入が必要です」表示 | ❌ | ❌ | NG |
| P0-4 | ポイント0で画像作成不可 | ❌ | ❌ | NG |
| P0-5 | 通信断/LLM失敗時 → エラー表示 + ポイント減らない | ✅ | ✅ | OK |
| P0-6 | ログアウト→再ログインでキャラ/履歴/ポイント保持 | ✅ | ✅ | OK |

### 認証機能 (5個)
| ID | シナリオ | Android | iOS | 状態 |
|----|---------|--------|-----|------|
| 1-1-1 | メールアドレス 会員登録 | ⏭️ | ⏭️ | スキップ |
| 1-1-3 | メールアドレス ログイン | ✅ | ✅ | OK |
| 1-1-4 | ログイン失敗（間違ったパスワード） | ✅ | ✅ | OK |
| 1-1-5 | ログアウト | ✅ | ✅ | OK |
| 1-1-6 | パスワード変更 | ✅ | ✅ | OK |

### キャラクター機能 (11個)
| ID | シナリオ | Android | iOS | 状態 |
|----|---------|--------|-----|------|
| 1-2-1 | キャラクター検索 | ✅ | ✅ | OK |
| 1-2-2 | キャラクター一覧確認 | ✅ | ✅ | OK |
| 1-2-3 | キャラクター詳細確認 | ✅ | ✅ | OK |
| 1-2-4 | ブロックした作成者のキャラクター検索除外確認 | ✅ | ✅ | OK |
| 1-3-1 | キャラクター作成 (AI生成機能使用) | ✅ | ✅ | OK |
| 1-3-2 | キャラクター作成（手動入力） | ❌ | ❌ | NG |
| 1-3-3 | キャラクター編集 | ✅ | ✅ | OK |
| 1-3-4 | キャラクター削除 | ⏭️ | ⏭️ | スキップ |
| 1-3-5 | キャラクタークローン | ⏭️ | ⏭️ | スキップ |
| 1-3-6 | キャラクターExport | ⏭️ | ⏭️ | スキップ |
| 1-3-7 | キャラクターImport | ✅ | ✅ | OK |

### チャット機能 (5個)
| ID | シナリオ | Android | iOS | 状態 |
|----|---------|--------|-----|------|
| 1-4-1 | チャット開始（新規） | ✅ | ✅ | OK |
| 1-4-2 | メッセージ送信・受信 | ✅ | ✅ | OK |
| 1-4-2-2 | AI応答受信 | ✅ | ✅ | OK |
| 1-4-3 | チャット履歴確認 | ✅ | ✅ | OK |
| 1-4-4 | チャットキャンセル | ✅ | ✅ | OK |

### ポイント・決済機能 (3個)
| ID | シナリオ | Android | iOS | 状態 |
|----|---------|--------|-----|------|
| 1-5-1 | ポイント残高確認 | ✅ | ✅ | OK |
| 1-5-3 | 出席チェック | ✅ | ✅ | OK |
| 1-5-4 | ポイント使用確認 | ✅ | ✅ | OK |

### ソーシャル機能 (11個)
| ID | シナリオ | Android | iOS | 状態 |
|----|---------|--------|-----|------|
| 1-6-1 | 自分のプロフィール確認 | ✅ | ✅ | OK |
| 1-6-2 | 他ユーザーのプロフィール確認 | ✅ | ✅ | OK |
| 1-6-3 | フォロー/アンフォロー | ❌ | ❌ | NG |
| 1-6-4 | フォロワー/フォロー中一覧確認 | ✅ | ✅ | OK |
| 1-6-5 | ユーザーブロック/アンブロック | ✅ | ✅ | OK |
| 1-6-6 | ブロックしたユーザー一覧確認 | ✅ | ✅ | OK |
| 1-6-7 | いいね機能 | ✅ | ✅ | OK |
| 1-6-8 | コメント作成 | ✅ | ✅ | OK |
| 1-6-8-2 | コメント編集 | ✅ | ✅ | OK |
| 1-6-9 | コメント削除 | ✅ | ✅ | OK |
| 1-6-10 | コメント通知確認 | ✅ | ✅ | OK |

### 通知機能 (3個)
| ID | シナリオ | Android | iOS | 状態 |
|----|---------|--------|-----|------|
| 1-7-1 | 通知一覧確認 | ✅ | ✅ | OK |
| 1-7-2 | 通知既読処理 | ✅ | ✅ | OK |
| 1-7-4 | 未読通知数確認 | ✅ | ✅ | OK |

### ランキング機能 (3個)
| ID | シナリオ | Android | iOS | 状態 |
|----|---------|--------|-----|------|
| 1-8-1 | リアルタイムランキング確認 | ✅ | ✅ | OK |
| 1-8-2 | 日次/週次/月次ランキング確認 | ✅ | ✅ | OK |
| 1-8-3 | ランキングからキャラクターをクリック | ✅ | ✅ | OK |

### お問い合わせ・通報 (3個)
| ID | シナリオ | Android | iOS | 状態 |
|----|---------|--------|-----|------|
| 1-9-1 | お問い合わせ作成 | ❌ | ❌ | NG |
| 1-9-2 | キャラクター通報 | ❌ | ❌ | NG |
| 1-9-3 | 自分のお問い合わせ/通報一覧確認 | ✅ | ✅ | OK |

### ペルソナ機能 (4個)
| ID | シナリオ | Android | iOS | 状態 |
|----|---------|--------|-----|------|
| 1-10-1 | ペルソナ一覧確認 | ✅ | ✅ | OK |
| 1-10-2 | ペルソナ作成 | ✅ | ✅ | OK |
| 1-10-3 | ペルソナ編集 | ✅ | ✅ | OK |
| 1-10-4 | ペルソナ削除 | ✅ | ✅ | OK |

### お知らせ・ガイド・約款 (4個)
| ID | シナリオ | Android | iOS | 状態 |
|----|---------|--------|-----|------|
| 1-11-1 | お知らせ一覧確認 | ✅ | ✅ | OK |
| 1-11-2 | お知らせ詳細確認 | ✅ | ✅ | OK |
| 1-11-3 | ガイド確認 | ✅ | ✅ | OK |
| 1-11-4 | 約款確認 | ✅ | ✅ | OK |

### キャラクター検索機能 (3個)
| ID | シナリオ | Android | iOS | 状態 |
|----|---------|--------|-----|------|
| CHAR-SEARCH-1 | キャラクター一覧ページが表示される | ✅ | ✅ | OK |
| CHAR-SEARCH-2 | キャラクターを検索できる | ✅ | ✅ | OK |
| CHAR-SEARCH-3 | キャラクター詳細ページに遷移できる | ✅ | ✅ | OK |

### ユーザージャーニー (1個)
| ID | シナリオ | Android | iOS | 状態 |
|----|---------|--------|-----|------|
| JOURNEY-1 | ログインからチャットまでの一連の流れ | ✅ | ✅ | OK |

### その他細かい機能 (3個)
| ID | シナリオ | Android | iOS | 状態 |
|----|---------|--------|-----|------|
| 3-3-1 | チャット後ランキング反映確認 | ❌ | ❌ | NG |
| 3-5-1 | セーフティフィルターON時OFFキャラクターブロック | ✅ | ✅ | OK |
| 3-12-2 | チャットノート機能 | ✅ | ✅ | OK |

---

## 📝 モバイル環境特有の事項

### 実装済みのモバイル対応機能
- ✅ スクロール処理: `scrollToElementMobile()` 関数で要素が見えるまでスクロール
- ✅ タッチイベント: `tapElementMobile()` 関数でモバイルタッチイベント処理
- ✅ ハイトナビゲーション: `clickBottomNavLink()`, `navigateFromBottomNav()` 関数でハイトナビゲーション処理
- ✅ ハンバーガーメニュー: `openMobileMenu()`, `closeMobileMenu()` 関数でハンバーガーメニュー処理 (補助機能)
- ✅ キーボード処理: `closeMobileKeyboard()` 関数でモバイルキーボードを閉じる

### モバイル環境での注意事項
1. **画面サイズ**: モバイルは画面が小さいため、スクロールがより必要になる場合があります
2. **タッチイベント**: PCのクリックの代わりにタッチイベントを使用します
3. **メニュー構造**: PCの上部メニューの代わりに**ハイトナビゲーション（BottomNav）**が使用されます
   - 画面下部に固定されたナビゲーションバー (ホーム, チャット, キャラ一覧, ランキング, マイページ)
   - ハンバーガーメニューは補助機能としてのみ存在します
4. **レイアウト**: PCと異なるレイアウトですが、機能は同じです

---

## 🔄 更新方法

この文書はテスト実行後に自動的に更新されます。手動で更新する場合は:

```bash
# モバイルテスト実行後、結果を確認
npm run test:e2e:mobile

# 結果に基づいてこの文書を手動で更新
```

---

## 📌 参考

- [PC版シナリオ管理](../e2e(PC%20Version)/E2E_TEST_SCENARIOS_JA.md)
- [モバイルE2EテストREADME](./README.md)


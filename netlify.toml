[functions]
  included_files = ["gcp/sa.json"]
  # OpenAI Embedding 生成など時間のかかる処理のためタイムアウトを30秒に延長
  node_bundler = "esbuild"

  # --- タイムアウト設定 ---
  # デフォルトは10秒ですが、最大30秒まで設定可能です。
  # (Edge Functionsではなく、標準のServerless Functionsにのみ適用)
  timeout = 30

[build.environment]
  # Secret Manager を使用するため secrets scanning を無効化
  SECRETS_SCAN_SMART_DETECTION_ENABLED = "false"